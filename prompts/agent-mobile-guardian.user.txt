Context:
- Repo is open in this workspace.
- We have `src/perf/PerfFlags.ts`, `src/graphics/makeRenderer.ts`, `src/components/Effects.tsx`, `src/scene/Lighting.tsx`.
- A local log bridge writes runtime logs to `browser.log`.

Tasks:
1) Scan the codebase. Ensure all mobile defaults match PerfFlags above.
2) Add `src/runtime/Governor.ts` and wire it so it runs every frame on mobile.
3) Implement event listeners for `perf/dropLevel` and `perf/lowFps` to progressively:
   a) hide distant groups / swap LOD,
   b) disable reflections/postFX,
   c) finally reduce per-material map usage if still necessary.
4) Add a CLI task `npm run mobile:preflight` to run `tsc --noEmit`, build, and report bundle size.
5) Start the dev server, instruct me to test on **real mobile** (Android USB or iOS) and interact for 30s.
6) Tail `browser.log`. If errors or `fps < 50`, propose and apply the smallest safe code diff.
7) If FPS is stable for 30s, propose enabling **shadows** on mobile with conservative settings (shadowMap 1024, single key light, bias tuned). Re-test; if FPS holds, gate AO.
8) Produce a final summary: FPS, draw calls, triangle count, assets enabled, diffs applied.

Rules:
- Always print diffs in unified format.
- Ask only for data you cannot obtain yourself (device model, observed FPS).
- Never enable two heavy features at once.
